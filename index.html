<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026 å·´ä¼¦è´¢å¯Œç½—ç›˜æ¨¡æ‹ŸæŒ‘æˆ˜</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700;900&family=Playfair+Display:wght@700&family=Roboto+Mono:wght@500&display=swap" rel="stylesheet">
    <style>
        /* ==================== 1. å…¨å±€è®¾ç½® ==================== */
        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; -webkit-tap-highlight-color: transparent; }
        
        body {
            font-family: "Noto Serif SC", "PingFang SC", serif;
            background-color: #4a0404;
            background-image: radial-gradient(#6d0b0b 15%, transparent 16%);
            background-size: 20px 20px;
            display: flex; justify-content: center; align-items: flex-start;
            min-height: 100vh; color: #333; overflow: hidden;
        }

        #app-container {
            width: 100%; max-width: 414px; height: 100vh;
            position: relative;
            background: linear-gradient(180deg, #8B0000 0%, #3e0202 100%);
            box-shadow: 0 0 30px rgba(0,0,0,0.7);
            display: flex; flex-direction: column; overflow: hidden;
        }

        .decoration-top {
            position: absolute; top: 50px; left: 0; width: 100%; height: 80px;
            background: url('data:image/svg+xml;utf8,<svg viewBox="0 0 1440 320" xmlns="http://www.w3.org/2000/svg"><path fill="%23FFD700" fill-opacity="0.1" d="M0,224L48,213.3C96,203,192,181,288,181.3C384,181,480,203,576,224C672,245,768,267,864,250.7C960,235,1056,181,1152,165.3C1248,149,1344,171,1392,181.3L1440,192L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z"></path></svg>');
            background-size: cover; z-index: 1; pointer-events: none;
        }

        /* é¡¶éƒ¨å¯¼èˆª */
        .barrons-header {
            width: 100%; height: 50px; flex-shrink: 0;
            display: flex; justify-content: space-between; align-items: center;
            padding: 0 15px; z-index: 100;
            background: #fff; border-bottom: 1px solid #eee; position: sticky; top: 0;
        }
        .header-left, .header-right { display: flex; align-items: center; gap: 12px; }
        .user-icon-placeholder { width: 32px; height: 32px; background-color: #ccc; border-radius: 50%; position: relative; overflow: hidden; cursor: pointer; }
        .user-icon-placeholder::before { content: ''; position: absolute; top: 5px; left: 50%; transform: translateX(-50%); width: 12px; height: 12px; background: #fff; border-radius: 50%; }
        .user-icon-placeholder::after { content: ''; position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 20px; height: 10px; background: #fff; border-radius: 10px 10px 0 0; }
        .header-logo { height: 28px; width: auto; display: block; }
        .icon-en { font-size: 12px; font-weight: bold; color: #fff; background: #1a1a1a; padding: 2px 5px; border-radius: 4px; }
        .icon-search { width: 20px; height: 20px; border: 2px solid #1a1a1a; border-radius: 50%; }

        /* ==================== 2. é¡µé¢å®¹å™¨ ==================== */
        .scrollable-page {
            flex: 1; overflow-y: auto; 
            padding: 0 20px 160px 20px; 
            display: flex; flex-direction: column; align-items: center;
            width: 100%; position: relative;
            -webkit-overflow-scrolling: touch;
        }
        .scrollable-page::-webkit-scrollbar { display: none; }

        /* Logo */
        .logo-center-large {
            width: 140px; height: auto; display: block; margin: 30px auto 10px auto; 
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3)); flex-shrink: 0;
        }

        /* ==================== 3. é¦–é¡µç»„ä»¶ ==================== */
        .title-group { text-align: center; color: #fff; margin-bottom: 20px; flex-shrink: 0; }
        .main-title { font-size: 24px; font-weight: 900; letter-spacing: 1px; margin-bottom: 8px; text-shadow: 0 2px 4px rgba(0,0,0,0.5); }
        .sub-title { font-size: 12px; color: #FFD700; opacity: 0.9; border-top: 1px solid rgba(255,215,0,0.3); border-bottom: 1px solid rgba(255,215,0,0.3); padding: 5px 12px; display: inline-block; line-height: 1.4;}

        .chart-container {
            width: 160px; height: 160px; border-radius: 50%; background: #fff; margin: 0 auto 20px auto; 
            position: relative; box-shadow: 0 0 30px rgba(0,0,0,0.5); border: 4px solid rgba(255,255,255,0.15);
            transition: background 0.2s ease; display: flex; justify-content: center; align-items: center; flex-shrink: 0;
        }
        .chart-center-content { position: absolute; width: 110px; height: 110px; background: #8B0000; border-radius: 50%; display: flex; justify-content: center; align-items: center; color: #fff; font-size: 28px; font-family: "Playfair Display"; font-weight: bold; }

        .controls-panel { width: 100%; background: rgba(0,0,0,0.25); border-radius: 12px; padding: 15px 20px; border: 1px solid rgba(255,255,255,0.1); margin-bottom: 20px; flex-shrink: 0; }
        .total-status-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .total-label { color: #fff; font-size: 14px; font-weight: bold; }
        .total-value { font-family: "Roboto Mono", monospace; font-size: 16px; font-weight: bold; }
        .status-ok { color: #4cd964; } .status-warn { color: #FFD700; }
        .slider-group { margin-bottom: 12px; }
        .slider-header { display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 4px; }
        .label-main { color: #fff; font-size: 14px; font-weight: bold; }
        .slider-val { font-family: "Roboto Mono", monospace; font-weight: bold; font-size: 14px; }
        .asset-expl { font-size: 10px; color: rgba(255,255,255,0.5); margin-top: 2px; margin-bottom: 4px; text-align: left; }
        input[type=range] { -webkit-appearance: none; width: 100%; height: 4px; border-radius: 2px; outline: none; background: rgba(255,255,255,0.2); }
        .c-growth { color: #ff6b6b; } .c-balance { color: #FFD700; } .c-hedge { color: #64b5f6; }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; width: 22px; height: 22px; border-radius: 50%; background: #fff; cursor: pointer; box-shadow: 0 0 5px rgba(0,0,0,0.5); margin-top: -9px; border: 2px solid rgba(255,255,255,0.8); }

        .section-container {
            width: 100%; background: rgba(0,0,0,0.2); 
            border: 1px solid rgba(255,255,255,0.1); border-radius: 12px;
            padding: 15px; margin-bottom: 20px; flex-shrink: 0;
        }
        .section-header { font-size: 15px; font-weight: bold; color: #FFD700; margin-bottom: 12px; padding-left: 8px; border-left: 3px solid #FFD700; }
        
        .task-row {
            background: rgba(255,255,255,0.08); border-radius: 8px; padding: 12px; margin-bottom: 10px;
            display: flex; align-items: center; justify-content: space-between; border: 1px solid rgba(255,255,255,0.05);
        }
        .task-icon { font-size: 20px; margin-right: 10px; }
        .task-info { flex: 1; }
        .task-title { font-size: 13px; font-weight: bold; color: #fff; margin-bottom: 2px; }
        .task-sub { font-size: 10px; color: rgba(255,255,255,0.5); }
        .task-btn { padding: 6px 14px; border-radius: 20px; font-size: 12px; font-weight: bold; border: none; cursor: pointer; background: linear-gradient(90deg, #FFD700, #FFA500); color: #8B0000; min-width: 70px; }
        .task-btn.done { background: #666; color: #999; cursor: default; }

        .coupon-row-new {
            background: #fffbe0; border: 1px solid #FFD700; border-radius: 8px;
            padding: 15px; margin-bottom: 12px; display: flex; justify-content: space-between; align-items: center;
            position: relative; box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .c-new-left { flex: 1; }
        .c-new-title { font-size: 16px; font-weight: 900; color: #d93025; margin-bottom: 4px; font-family: "Roboto Mono"; }
        .c-new-desc { font-size: 12px; color: #333; font-weight: bold; margin-bottom: 2px; }
        .c-new-date { font-size: 10px; color: #888; }
        .c-new-btn { padding: 6px 15px; border-radius: 20px; font-size: 12px; font-weight: bold; border: none; cursor: pointer; }
        .c-status-use { background: #d93025; color: #fff; box-shadow: 0 2px 5px rgba(217, 48, 37, 0.4); }
        .c-status-used { background: #999; color: #fff; cursor: default; }
        .c-status-expired { background: transparent; border: 1px solid #999; color: #999; cursor: default; }
        .more-coupons { text-align: center; font-size: 12px; color: #FFD700; text-decoration: underline; cursor: pointer; padding: 10px; }

        .page-footer { width: 100%; text-align: center; margin-top: 10px; padding: 10px 0 20px 0; border-top: 1px dashed rgba(255,255,255,0.1); flex-shrink: 0; }
        .footer-link { color: rgba(255,215,0,0.6); font-size: 12px; text-decoration: underline; cursor: pointer; margin-bottom: 8px; display: inline-block;}
        .risk-text { color: rgba(255,255,255,0.3); font-size: 10px; line-height: 1.4; padding: 0 10px; text-align: justify; }

        /* å¸åº•æ“ä½œåŒº */
        .action-area-sticky { 
            position: absolute; bottom: 0; left: 0; width: 100%; 
            background: linear-gradient(to top, #3e0202 95%, rgba(62, 2, 2, 0));
            padding: 20px 0 30px 0; z-index: 50; 
            display: flex; flex-direction: column; align-items: center;
            border-top: 1px solid rgba(255,255,255,0.05);
        }
        .btn-main {
            width: 85%; height: 50px;
            background: linear-gradient(135deg, #2ecbe9 0%, #1DB2D4 50%, #158ca7 100%);
            border: 2px solid rgba(255,255,255,0.3); border-radius: 50px;
            color: #fff; font-size: 18px; font-weight: bold; cursor: pointer;
            box-shadow: 0 8px 15px rgba(29, 178, 212, 0.3); margin-bottom: 8px; transition: all 0.2s ease;
        }
        .btn-main:active { transform: translateY(2px); }
        .btn-main:disabled { background: #555; border-color: #777; color: #aaa; box-shadow: none; cursor: not-allowed; }
        .hint-text { color: rgba(255,255,255,0.6); font-size: 12px; letter-spacing: 1px; }

        /* ç»“æœé¡µç»„ä»¶ */
        .report-card {
            width: 100%; background-color: #fffbe0; border-radius: 12px; padding: 30px 20px; 
            box-shadow: 0 15px 40px rgba(0,0,0,0.6); margin-bottom: 20px; text-align: center;
            background-image: url("data:image/svg+xml,%3Csvg width='6' height='6' viewBox='0 0 6 6' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23d9d0b6' fill-opacity='0.4' fill-rule='evenodd'%3E%3Cpath d='M5 0h1L0 6V5zM6 5v1H5z'/%3E%3C/g%3E%3C/svg%3E");
        }
        .report-header-hint { 
            color: #d93025; font-size: 12px; font-weight: bold; letter-spacing: 1px; margin-bottom: 5px; 
            text-transform: uppercase; border-bottom: 1px solid rgba(217, 48, 37, 0.2); display: inline-block; padding-bottom: 3px;
        }
        .report-title { font-size: 24px; font-weight: bold; color: #333; margin-bottom: 10px; font-family: "Noto Serif SC"; }
        .bar-chart { display: flex; height: 12px; width: 100%; border-radius: 6px; overflow: hidden; margin-bottom: 20px; }
        .bar-seg { height: 100%; transition: width 1s ease; }
        .report-desc { font-size: 14px; line-height: 1.6; color: #444; text-align: justify; margin-bottom: 20px; }
        .barrons-advice { text-align: left; border-left: 3px solid #d93025; padding-left: 10px; font-style: italic; font-size: 13px; color: #333; }
        
        .risk-warning-box {
            width: 100%; background: rgba(0,0,0,0.2); padding: 15px; border-radius: 8px;
            color: rgba(255,255,255,0.6); font-size: 11px; line-height: 1.5; margin-bottom: 20px;
            text-align: justify; border: 1px dashed rgba(255,255,255,0.1);
        }

        .coupon-premium-wrapper { width: 100%; margin-bottom: 20px; }
        
        .coupon-ticket { display: flex; width: 100%; height: 90px; background: linear-gradient(to right, #FFD700 30%, #fff 30%); border-radius: 8px; overflow: hidden; cursor: pointer; }
        .ticket-left { width: 30%; background: linear-gradient(135deg, #FFD700, #FFA500); display: flex; flex-direction: column; justify-content: center; align-items: center; color: #8B0000; border-right: 2px dashed rgba(139,0,0,0.2); }
        .ticket-amount { font-size: 28px; font-weight: 900; font-family: "Roboto Mono"; }
        .ticket-right { flex: 1; padding: 10px 15px; display: flex; flex-direction: column; justify-content: center; background: #fff; }
        .ticket-title { font-size: 14px; font-weight: bold; margin-bottom: 4px; color:#333; }
        .ticket-action-row { display: flex; justify-content: space-between; align-items: center; margin-top: 5px; }
        .ticket-btn { background: #d93025; color: #fff; border: none; padding: 4px 12px; border-radius: 20px; font-size: 11px; }
        
        /* å¸åº•ä¼˜æƒ åˆ¸ */
        .sticky-coupon-bar {
            position: fixed; bottom: 0; left: 0; width: 100%; height: 70px;
            background: #FFD700; z-index: 100;
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 20px; box-shadow: 0 -5px 20px rgba(0,0,0,0.3);
            transform: translateY(100%); transition: transform 0.3s ease-in-out;
        }
        .sticky-coupon-bar.visible { transform: translateY(0); }
        .sticky-text { font-size: 16px; font-weight: 900; color: #330000; font-family: "Roboto Mono"; }
        .sticky-btn { background: #330000; color: #FFD700; border: none; padding: 10px 25px; border-radius: 30px; font-size: 14px; font-weight: bold; }

        .recommendation-module { width: 100%; background: #fff; border-radius: 12px; padding: 15px; flex-shrink: 0; }
        .module-title { font-size: 15px; font-weight: bold; border-left: 4px solid #FFD700; padding-left: 10px; margin-bottom: 10px; color:#FFD700; display:block; text-align:left;}
        .rec-item { padding: 8px 0; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; font-size: 12px; color: #333; cursor: pointer; }
        .rec-arrow { color: #999; }

        /* ä¿ƒé”€é¡µæ ·å¼ (ä¿®å¤2ï¼šä»·æ ¼é¢œè‰²) */
        .offer-header { text-align: center; margin-bottom: 20px; color: #fff; flex-shrink: 0; }
        .offer-header h2 { font-size: 24px; margin-bottom: 5px; color: #FFD700; text-shadow: 0 2px 5px rgba(0,0,0,0.5); }
        .price-black-card { width: 100%; background: linear-gradient(145deg, #2a0e0e, #1a0505); border: 1px solid rgba(255,215,0,0.3); border-radius: 12px; padding: 25px 20px; text-align: center; box-shadow: 0 10px 25px rgba(0,0,0,0.5); margin-bottom: 20px; flex-shrink: 0; }
        .pc-card-title { color: #FFD700; font-size: 18px; font-weight: bold; margin: 0 0 20px 0; font-family: "Noto Serif SC"; letter-spacing: 1px; border-bottom: 1px solid rgba(255,215,0,0.2); padding-bottom: 15px; }
        .pc-origin { color: #888; text-decoration: line-through; font-size: 14px; margin-bottom: 8px; }
        
        .pc-main-row { display: flex; justify-content: center; align-items: baseline; margin-bottom: 12px; color: #FFD700; }
        /* å¼ºåˆ¶é‡‘è‰² */
        .pc-symbol { font-size: 32px; margin-right: 5px; font-weight: bold; color: #FFD700 !important; }
        .pc-price { font-size: 60px; font-weight: 900; line-height: 1; font-family: 'Playfair Display', serif; color: #FFD700 !important; }
        
        .pc-tag { background: #FFD700; color: #4a0404; font-size: 12px; padding: 2px 8px; border-radius: 4px; font-weight: bold; margin-left: 10px; position: relative; top: -15px; }
        .pc-origin-row { margin-bottom: 15px; }
        .pc-origin { color: rgba(255,255,255,0.5); text-decoration: line-through; font-size: 13px; }
        .pc-desc { font-size: 12px; color: #ccc; background: rgba(255,255,255,0.1); display: inline-block; padding: 4px 15px; border-radius: 20px; }

        .countdown-container { text-align: center; margin-bottom: 15px; color: #fff; flex-shrink: 0;}
        .timer-display { font-size: 22px; color: #FFD700; font-family: monospace; font-weight: bold; letter-spacing: 2px; margin-top: 5px;}
        .section-title { color: #bd9e59; font-size: 14px; margin: 30px 0 15px 0; opacity: 0.9; text-align: center; font-weight: bold; flex-shrink: 0; display: flex; align-items: center; justify-content: center; width: 100%;}
        .section-title::before, .section-title::after { content: ""; height: 1px; background: #bd9e59; flex: 1; margin: 0 15px; opacity: 0.5; }
        .benefit-img { width: 100%; border-radius: 12px; margin-bottom: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); border: 1px solid rgba(255,215,0,0.2); flex-shrink: 0;}
        .rules-container-offer { width: 100%; background: rgba(0,0,0,0.3); padding: 20px; border-radius: 12px; margin-top: 20px; margin-bottom: 20px; border: 1px dashed rgba(255,255,255,0.15); text-align: left;}
        .rules-list { list-style: none; padding: 0; margin: 0; }
        .rules-list li { font-size: 11px; color: rgba(255,255,255,0.6); line-height: 1.8; margin-bottom: 4px; position: relative; padding-left: 12px; }
        .rules-list li::before { content: 'â€¢'; position: absolute; left: 0; color: #888; }
        .footer-note { font-size: 10px; color: rgba(255,255,255,0.3); text-align: center; margin-bottom: 20px; flex-shrink: 0; }

        /* Toast ä¸ å¼¹çª—æ ¸å¿ƒ (ä¿®å¤1ï¼šåº•éƒ¨ä½ç½®) */
        .toast { 
            position: fixed; bottom: 20%; left: 50%; transform: translateX(-50%); 
            background: #000; color: #fff; padding: 12px 24px; border-radius: 8px; 
            font-size: 14px; z-index: 9999; opacity: 0; pointer-events: none; transition: opacity 0.3s; 
            box-shadow: 0 4px 12px rgba(0,0,0,0.3); white-space: nowrap;
        }
        .toast.show { opacity: 1; }
        
        .modal-overlay, .login-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 3000; display: none; justify-content: center; align-items: center; }
        #loginOverlay { display: none; }
        
        /* ç™»å½•å¼¹çª— (H5 åº•éƒ¨æ»‘å‡º) */
        .login-box-slide { 
            position: absolute; bottom: 0; left: 0; width: 100%; 
            background: #fff; border-radius: 20px 20px 0 0; padding: 25px 25px 50px 25px; 
            animation: slideUp 0.3s ease forwards;
        }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }

        /* æ¬¢è¿å¼¹çª—/è§„åˆ™å¼¹çª— (å±…ä¸­) */
        .login-box-center { width: 85%; max-width: 340px; background: #fff; border-radius: 8px; padding: 20px; position: relative; }

        .login-close-btn { position: absolute; top: 15px; right: 15px; font-size: 24px; color: #999; cursor: pointer; }
        .btn-submit-login { width: 100%; background: #0099CC; color: #fff; padding: 12px; border: none; border-radius: 4px; font-size: 16px; cursor: pointer; margin-top: 15px; font-weight: bold;}
        
        .login-tabs { display: flex; gap: 20px; margin-bottom: 20px; border-bottom: none; }
        .login-tab { font-size: 16px; color: #666; cursor: pointer; }
        .login-tab.active { color: #333; font-weight: bold; border-bottom: 2px solid #333; padding-bottom: 4px;}
        .login-row { display: flex; border-bottom: 1px solid #eee; padding-bottom: 12px; margin-bottom: 20px; align-items: center; }
        .input-clean { border: none; flex: 1; font-size: 16px; outline: none; }
        .get-code { color: #0099CC; font-size: 14px; cursor: pointer; }
        
        .hidden { display: none !important; }
        .fade-in { animation: fadeIn 0.5s ease forwards; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <div id="app-container">
        <div class="barrons-header">
            <div class="header-left"><div class="user-icon-placeholder" onclick="showLogin()"></div></div>
            <div class="header-center"><img src="https://admin.barrons.com.cn/uploads/cover_image/2026/01/19/1768790601_a5adc63e4ca8b95da3db.png" alt="Barron's" class="header-logo"></div>
            <div class="header-right"><div class="icon-en">EN</div><div class="icon-search"></div></div>
        </div>

        <div class="decoration-top"></div>
        <div id="toast" class="toast"></div>

        <div id="welcomeModal" class="modal-overlay" style="display: none;">
            <div class="login-box-center" style="text-align: left; max-height: 80vh; overflow-y: auto;">
                <div class="login-close-btn" onclick="closeWelcome()">Ã—</div>
                <h3 style="margin-bottom:15px; text-align:center; font-size:18px;">2026 æŠ•èµ„é£æ ¼æ¢ç´¢</h3>
                <div style="font-size:13px; color:#333; line-height:1.6; margin-bottom:15px;">
                    æ¬¢è¿å‚ä¸å·´ä¼¦è´¢å¯Œç½—ç›˜ã€Œ2026 æŠ•èµ„é£æ ¼æ¢ç´¢ã€æ¨¡æ‹ŸæŒ‘æˆ˜ï¼
                </div>
                <div style="font-size:13px; color:#666; line-height:1.6; margin-bottom:15px;">
                    è¯·ä¾æ®æ‚¨çš„æŠ•èµ„ç›´è§‰ä¸åå¥½ï¼Œè‡ªç”±åˆ†é…å¢é•¿æ¢ç´¢å‹ã€ç¨³å¥ç§¯ç´¯å‹ã€çµæ´»åº”å¯¹å‹ä¸‰ç±»æ¨¡æ‹Ÿèµ„äº§åŒ…çš„æƒé‡ï¼Œå³å¯è§£é”ä¸“å±çš„ã€Šä¸ªäººæŠ•èµ„é£æ ¼æ¢ç´¢æŠ¥å‘Šã€‹ã€‚
                </div>
                <div style="font-size:13px; color:#666; line-height:1.6; margin-bottom:15px;">
                    <strong>æŠ¥å‘Šå°†ä¸ºæ‚¨å‘ˆç°ä¸‰å¤§æ ¸å¿ƒå†…å®¹ï¼š</strong>
                    <ul style="padding-left: 20px; margin: 5px 0;">
                        <li>æ‚¨çš„ä¸“å±æŠ•èµ„é£æ ¼æ·±åº¦è§£æ</li>
                        <li>å¯¹åº”é£æ ¼ä»£è¡¨æ€§æŠ•èµ„å¤§å¸ˆçš„æ ¸å¿ƒæ€è·¯åˆ†äº«ï¼ˆå¦‚å·´è²ç‰¹ã€ç´¢ç½—æ–¯ç­‰ï¼Œä»…ä¾›çŸ¥è¯†æ™®åŠï¼‰</li>
                        <li>å·´ä¼¦ç²¾é€‰çš„ä¼˜è´¨ç†è´¢çŸ¥è¯†æ–‡ç« æ¨è</li>
                    </ul>
                </div>
                <div style="font-size:11px; color:#999; line-height:1.4; background:#f5f5f5; padding:10px; border-radius:4px; margin-bottom:20px;">
                    <strong>é‡è¦æç¤ºï¼š</strong>æœ¬æ´»åŠ¨ä»…ä¸ºæŠ•èµ„ç†è´¢çŸ¥è¯†çš„æ¨¡æ‹Ÿä½“éªŒä¸ç§‘æ™®ï¼Œæ‰€æœ‰å†…å®¹å‡ä¸æ„æˆä»»ä½•æŠ•èµ„å»ºè®®ï¼Œäº¦ä¸ä»£è¡¨å¯¹æœªæ¥å¸‚åœºçš„é¢„æµ‹ã€‚æŠ•èµ„æœ‰é£é™©ï¼Œå†³ç­–éœ€è°¨æ…ã€‚è¿‡å¾€å¸‚åœºè¡¨ç°ä¸é¢„ç¤ºæœªæ¥æ”¶ç›Šï¼Œä»»ä½•æŠ•èµ„å†³ç­–å‡åº”ç»“åˆæ‚¨è‡ªèº«çš„è´¢åŠ¡çŠ¶å†µã€é£é™©æ‰¿å—èƒ½åŠ›åŠæŠ•èµ„ç›®æ ‡ï¼Œå¹¶ä¸»åŠ¨å’¨è¯¢ä¸“ä¸šè´¢åŠ¡é¡¾é—®çš„æ„è§ã€‚
                </div>
                <button class="btn-submit-login" onclick="closeWelcome()">å¼€å§‹æŒ‘æˆ˜</button>
            </div>
        </div>

        <div id="page-landing" class="scrollable-page">
            <img src="https://admin.barrons.com.cn/uploads/cover_image/2026/01/19/1768790601_a5adc63e4ca8b95da3db.png" class="logo-center-large">

            <div class="title-group">
                <h1 class="main-title">2026 å·´ä¼¦è´¢å¯Œç½—ç›˜æ¨¡æ‹ŸæŒ‘æˆ˜</h1>
                <div class="sub-title">æµ‹æµ‹ä½ çš„2026æŠ•èµ„é£æ ¼ï¼Œè§£é”å·´ä¼¦ä¸“ä¸šç†è´¢æ´å¯Ÿï¼</div>
            </div>
            
            <div class="chart-container" id="allocationChart"><div class="chart-center-content"><div class="text-2026">2026</div></div></div>

            <div class="controls-panel">
                <div class="total-status-bar"><div class="total-label">å½“å‰æ€»ä»“ä½</div><div class="total-value" id="totalValue">100%</div></div>
                <div class="slider-group"><div class="slider-header"><span class="label-main c-growth">è¿›æ”» (AI/Tech)</span><span class="slider-val c-growth" id="val-growth">30%</span></div><div class="asset-expl">åº•å±‚èµ„äº§ï¼šAI ç§‘æŠ€è‚¡ / çº³æŒ‡ 100</div><input type="range" id="range-growth" class="range-growth" min="0" max="100" value="30" oninput="handleSliderChange('range-growth')"></div>
                <div class="slider-group"><div class="slider-header"><span class="label-main c-balance">ç¨³å¥ (Dividend)</span><span class="slider-val c-balance" id="val-balance">40%</span></div><div class="asset-expl">åº•å±‚èµ„äº§ï¼šçŸ­æœŸç¾å€º / é«˜è‚¡æ¯çº¢åˆ©è‚¡</div><input type="range" id="range-balance" class="range-balance" min="0" max="100" value="40" oninput="handleSliderChange('range-balance')"></div>
                <div class="slider-group"><div class="slider-header"><span class="label-main c-hedge">å¯¹å†² (Gold/Crypto)</span><span class="slider-val c-hedge" id="val-hedge">30%</span></div><div class="asset-expl">åº•å±‚èµ„äº§ï¼šé»„é‡‘ (Gold) / å¤§å®—å•†å“ / BTC</div><input type="range" id="range-hedge" class="range-hedge" min="0" max="100" value="30" oninput="handleSliderChange('range-hedge')"></div>
            </div>

            <div class="section-container">
                <div class="section-header"><span>âš¡ åšä»»åŠ¡ï¼Œè·å–è¯„æµ‹æ¬¡æ•°</span></div>
                <div class="task-row"><div class="task-icon">ğŸ“…</div><div class="task-info"><div class="task-title">æ¯æ—¥ç­¾åˆ°</div><div class="task-sub">æ¯å¤©ä¸€æ¬¡ï¼Œä¿æŒå…³æ³¨</div></div><button class="task-btn" id="btn-checkin" onclick="doTask('checkin')">ç­¾åˆ°</button></div>
                <div class="task-row"><div class="task-icon">ğŸ’¬</div><div class="task-info"><div class="task-title">åˆ†äº«ç»™å¾®ä¿¡å¥½å‹</div><div class="task-sub">é‚€è¯·å¥½å‹æµ‹è¿åŠ¿</div></div><button class="task-btn" id="btn-shareF" onclick="doTask('shareFriend')">å»åˆ†äº«</button></div>
                <div class="task-row"><div class="task-icon">â­•</div><div class="task-info"><div class="task-title">åˆ†äº«å¾®ä¿¡æœ‹å‹åœˆ</div><div class="task-sub">è®©æ›´å¤šäººçœ‹åˆ°ä½ çš„å¥½è¿</div></div><button class="task-btn" id="btn-shareM" onclick="doTask('shareMoments')">å»åˆ†äº«</button></div>
                <div class="task-row"><div class="task-icon">ğŸ“–</div><div class="task-info"><div class="task-title">é˜…è¯»æ·±åº¦æ–‡ç« </div><div class="task-sub">æ´å¯Ÿ2026å¸‚åœºå…ˆæœº</div></div><button class="task-btn" id="btn-read" onclick="doTask('read')">å»é˜…è¯»</button></div>
            </div>

            <div class="section-container">
                <div class="section-header"><span>ğŸŸï¸ æˆ‘çš„ç¤¼é‡</span></div>
                <div id="coupon-list-dynamic"></div>
                <div id="more-coupons-btn" class="more-coupons hidden" onclick="goToCouponList()">æŸ¥çœ‹æ›´å¤š ></div>
            </div>

            <div class="page-footer">
                <div class="footer-link" onclick="showRules()">â“˜ æ´»åŠ¨è§„åˆ™è¯¦æƒ…</div>
                <div class="risk-text">é£é™©æç¤ºï¼šæœ¬æ´»åŠ¨ä»…ä¸ºæ¨¡æ‹Ÿä½“éªŒï¼Œä¸æ„æˆä»»ä½•æŠ•èµ„å»ºè®®ã€‚å¸‚åœºæœ‰é£é™©ï¼ŒæŠ•èµ„éœ€è°¨æ…ã€‚</div>
            </div>
        </div>

        <div class="action-area-sticky" id="landingAction">
            <button class="btn-main" id="drawBtn" onclick="analyzePortfolio()">ç”Ÿæˆé…ç½®è¯„æµ‹</button>
            <div class="hint-text" id="drawHint">ä»Šæ—¥å‰©ä½™æœºä¼šï¼š97/100 æ¬¡</div>
        </div>

        <div id="page-result" class="scrollable-page hidden">
            <img src="https://admin.barrons.com.cn/uploads/cover_image/2026/01/19/1768790601_a5adc63e4ca8b95da3db.png" class="logo-center-large">

            <div class="report-card">
                <div style="position:absolute; top:15px; right:15px; width:60px; height:60px; border:3px solid #8B0000; border-radius:50%; color:#8B0000; display:flex; justify-content:center; align-items:center; font-size:12px; font-weight:900; transform:rotate(-15deg); opacity:0.8;">VERIFIED</div>
                <div class="report-header-hint">æ­å–œæ‚¨å®ŒæˆæŠ•èµ„é£é™©æ¢ç´¢</div>
                <h3 class="report-title" id="res-title"></h3>
                <div class="bar-chart" id="res-bar"></div>
                <p class="report-desc" id="res-desc"></p>
                <div class="barrons-advice"><div class="advice-label">BARRON'S TAKE</div><div class="advice-text" id="res-advice"></div></div>
            </div>
            
            <div class="risk-warning-box">
                é£é™©æç¤ºï¼šæœ¬æ´»åŠ¨ä»…ä¸ºæŠ•èµ„ç†è´¢çŸ¥è¯†æ¨¡æ‹Ÿä¸æ™®åŠï¼Œæ‰€æœ‰å†…å®¹ä¸æ„æˆä»»ä½•å…·ä½“çš„æŠ•èµ„å»ºè®®æˆ–å¯¹æœªæ¥å¸‚åœºçš„é¢„æµ‹ã€‚æŠ•èµ„æ¶‰åŠé£é™©ï¼Œè¿‡å¾€è¡¨ç°ä¸ä»£è¡¨æœªæ¥æ”¶ç›Šã€‚ä»»ä½•æŠ•èµ„å†³ç­–éƒ½åº”åŸºäºæ‚¨è‡ªèº«çš„è´¢åŠ¡çŠ¶å†µã€é£é™©æ‰¿å—èƒ½åŠ›å’ŒæŠ•èµ„ç›®æ ‡ï¼Œå¹¶å’¨è¯¢ä¸“ä¸šçš„è´¢åŠ¡é¡¾é—®ã€‚
            </div>

            <div class="module-title" style="margin-top:20px; color:#FFD700; border-left-color:#FFD700;">ä¸“å±ç¤¼é‡</div>
            <div class="coupon-premium-wrapper" id="static-coupon">
                <div class="coupon-ticket" onclick="goToOffer()">
                    <div class="ticket-left"><div class="ticket-val-row"><span class="ticket-symbol">Â¥</span><span class="ticket-amount" id="ticketAmount">--</span></div><div class="ticket-label">ä¼˜æƒ åˆ¸</div></div>
                    <div class="ticket-right"><div class="ticket-title">å·´ä¼¦èè‹±åˆ›å§‹ä¼šå‘˜</div><div class="ticket-desc">é™æ—¶ç¤¼é‡ Â· ç•…è¯»å…¨çƒæ·±åº¦è´¢æŠ¥</div><div class="ticket-action-row"><div class="ticket-timer">â³ <span id="ticketTimer">04:59:59</span></div><button class="ticket-btn">ç«‹å³ä½¿ç”¨ &gt;</button></div></div>
                </div>
            </div>

            <div class="module-title" style="margin-top:10px; color:#FFD700; border-left-color:#FFD700;">å·´ä¼¦ç²¾é€‰ Â· å¸‚åœºå‰ç»</div>
            <div class="recommendation-module" style="margin-top:0;">
                <ul class="rec-list">
                    <li class="rec-item" onclick="window.location.href='https://www.barrons.com.cn/original/article'"><span class="rec-title">2026å¹´å…¨çƒå¸‚åœºå±•æœ›ï¼šåœ¨ä¸ç¡®å®šæ€§ä¸­å¯»æ‰¾ç¡®å®šæ€§æ”¶ç›Š</span><span class="rec-arrow">></span></li>
                    <li class="rec-item" onclick="window.location.href='https://www.barrons.com.cn/original/article'"><span class="rec-title">ç§‘æŠ€è‚¡ä¼°å€¼æ³¡æ²«ç ´è£‚ï¼Ÿåå°”è¡—é¡¶çº§åˆ†æå¸ˆçš„æœ€æ–°ç ”åˆ¤</span><span class="rec-arrow">></span></li>
                    <li class="rec-item" onclick="window.location.href='https://www.barrons.com.cn/original/article'"><span class="rec-title">é™æ¯å‘¨æœŸå¼€å¯ï¼Œé«˜è‚¡æ¯ç­–ç•¥èƒ½å¦è·‘èµ¢å¤§ç›˜ï¼Ÿ</span><span class="rec-arrow">></span></li>
                    <li class="rec-item" onclick="window.location.href='https://www.barrons.com.cn/original/article'"><span class="rec-title">é»„é‡‘ä¸æ¯”ç‰¹å¸ï¼šè°æ‰æ˜¯çœŸæ­£çš„æŠ—é€šèƒ€ä¹‹ç‹ï¼Ÿ</span><span class="rec-arrow">></span></li>
                    <li class="rec-item" onclick="window.location.href='https://www.barrons.com.cn/original/article'"><span class="rec-title">æ–°å…´å¸‚åœºå´›èµ·ï¼šå°åº¦ä¸ä¸œå—äºšçš„æŠ•èµ„æœºä¼šå…¨è§£æ</span><span class="rec-arrow">></span></li>
                </ul>
            </div>
        </div>
        
        <div class="sticky-coupon-bar" id="stickyCouponBar" onclick="goToOffer()">
            <div class="sticky-text">ä¸“äº«ä¼˜æƒ åˆ¸ Â¥<span id="stickyAmount">--</span></div>
            <button class="sticky-btn">ç«‹å³ä½¿ç”¨</button>
        </div>

        <div id="page-offer" class="scrollable-page hidden">
            <img src="https://admin.barrons.com.cn/uploads/cover_image/2026/01/19/1768790601_a5adc63e4ca8b95da3db.png" class="logo-center-large">

            <div class="offer-header"><h2>é©¬å¹´é™å®šç¤¼é‡</h2><p>åŠ©ä½ åœ¨2026ç¾è‚¡å¸‚åœºä¸€é©¬å½“å…ˆ</p></div>
            
            <div class="price-black-card">
                <h1 class="pc-card-title">å·´ä¼¦èè‹±åˆ›å§‹ä¼šå‘˜å¹´å¡</h1>
                <div class="pc-main-row">
                    <span class="pc-symbol">Â¥</span><span class="pc-price" id="offer-price-num">518</span>
                    <span class="pc-tag" id="offer-tag">å·²ä¼˜æƒ 562å…ƒ</span>
                </div>
                <div class="pc-origin-row"><span class="pc-origin">åŸä»· Â¥ 1080 / å¹´</span></div>
                <div class="pc-desc" id="offer-daily-price">å·²æ¯”å®˜ç½‘æ¸ é“ä»·è¿˜ä¼˜æƒ 180å…ƒ</div>
            </div>

            <div class="countdown-container"><div class="countdown-label">ä¼˜æƒ å¤±æ•ˆå€’è®¡æ—¶</div><div class="timer-display" id="offerTimer">04:59:59</div></div>
            <div class="btn-wrapper" style="width: 100%; margin-bottom: 20px; animation: cardSlideUp 1s ease; flex-shrink: 0;"><button class="btn-main" onclick="alert('å³å°†è·³è½¬æ”¯ä»˜ç½‘å…³...')">å¼€å¯é©¬å¹´è´¢è¿</button></div>
            
            <h3 class="section-title" style="color:#fff; margin-bottom:15px;">ä¼šå‘˜æ ¸å¿ƒæƒç›Š</h3>
            <img src="https://admin.barrons.com.cn/uploads/cover_image/2026/01/19/1768794382_315d133577c4362dac71.jpg" alt="ä¼šå‘˜æƒç›Šä»‹ç»" class="benefit-img">
            
            <div class="rules-container-offer">
                <div class="rules-title">æ´»åŠ¨è§„åˆ™è¯´æ˜ï¼š</div>
                <ul class="rules-list"><li>æ´»åŠ¨æ—¶é—´ï¼šå³æ—¥èµ·è‡³2026å¹´2æœˆ12æ—¥ã€‚</li><li>ä¼˜æƒ å¯¹è±¡ï¼šæœ¬ä¼˜æƒ ä»…é™å·´ä¼¦ä¸­æ–‡ç½‘æ³¨å†Œç”¨æˆ·å‚ä¸ã€‚</li><li>æƒç›Šå‘æ”¾ï¼šè®¢é˜…æˆåŠŸåï¼Œä¼šå‘˜æƒç›Šå°†å³æ—¶å‘æ”¾ã€‚</li><li>è™šæ‹Ÿå•†å“ï¼Œå”®å‡ºä¸é€€ã€‚</li></ul>
            </div>
            <div class="footer-note">*æ´»åŠ¨æœ€ç»ˆè§£é‡Šæƒå½’å·´ä¼¦ä¸­æ–‡ç½‘æ‰€æœ‰</div>
        </div>

        <div id="page-coupon-list" class="scrollable-page hidden" style="background:#4a0404; padding-bottom: 20px;">
            <div class="barrons-header" style="width:100%; justify-content:center; position:relative; background:#fff; margin-bottom:20px; border-radius:0 0 8px 8px; flex-shrink:0;">
                <div style="position:absolute; left:15px; font-size:24px; cursor:pointer;" onclick="backToHome()">&lt;</div>
                <div style="font-weight:bold; font-size:16px;">æˆ‘çš„ä¼˜æƒ åˆ¸</div>
            </div>
            <img src="https://admin.barrons.com.cn/uploads/cover_image/2026/01/19/1768790601_a5adc63e4ca8b95da3db.png" class="logo-center-large">
            <div id="full-coupon-list" style="width:100%; padding:0;"></div>
            <div class="page-footer">
                <div class="footer-link" onclick="showRules()">â“˜ æ´»åŠ¨è§„åˆ™è¯¦æƒ…</div>
                <div class="risk-text">é£é™©æç¤ºï¼šæœ¬æ´»åŠ¨ä»…ä¸ºæ¨¡æ‹Ÿä½“éªŒï¼Œä¸æ„æˆä»»ä½•æŠ•èµ„å»ºè®®ã€‚</div>
            </div>
        </div>

        <div id="loginOverlay" class="login-overlay" style="display:none;" onclick="closeLogin()">
            <div class="login-box-slide" onclick="event.stopPropagation()">
                <div class="login-close-btn" onclick="closeLogin()">Ã—</div>
                <div style="font-size:18px; font-weight:bold; text-align:center; margin-bottom:20px;">ç™»å½• / æ³¨å†Œ</div>
                <div class="login-tabs"><div class="login-tab active">éªŒè¯ç ç™»å½•</div><div class="login-tab">è´¦å·å¯†ç ç™»å½•</div></div>
                <div class="login-form-group">
                    <div class="login-row"><span style="font-size:14px;font-weight:bold;margin-right:10px;">+86</span><input type="tel" class="input-clean" placeholder="æ‰‹æœºå·"></div>
                    <div class="login-row"><input type="text" class="input-clean" placeholder="éªŒè¯ç "><span class="get-code">è·å–éªŒè¯ç </span></div>
                </div>
                <button class="btn-submit-login" onclick="performLogin()">ç™»å½•</button>
            </div>
        </div>

        <div id="rulesModal" class="modal-overlay" style="display:none;" onclick="closeRules()">
            <div class="login-box-center" onclick="event.stopPropagation()">
                <div class="login-close-btn" onclick="closeRules()">Ã—</div>
                <h3 style="margin-bottom:10px;">æ´»åŠ¨è§„åˆ™</h3>
                <div style="font-size:12px;color:#666;line-height:1.6;margin-top:10px;text-align:left;">
                    <p>1. æ´»åŠ¨æ—¶é—´ï¼šå³æ—¥èµ·è‡³2026å¹´2æœˆ12æ—¥ã€‚</p>
                    <p>2. ç”¨æˆ·é€šè¿‡æ»‘åŠ¨æ»‘å—é…ç½®èµ„äº§æ¯”ä¾‹ï¼Œç”Ÿæˆä¸ªæ€§åŒ–æŠ•èµ„è¯„æµ‹ã€‚</p>
                    <p>3. èµ„äº§é…ç½®æ€»å’Œå¿…é¡»å¤§äº0%æ–¹å¯ç”ŸæˆæŠ¥å‘Šï¼Œä¸”ä¸èƒ½è¶…è¿‡100%ã€‚</p>
                    <p>4. æ¯æ—¥æœ‰100æ¬¡å…è´¹è¯„æµ‹æœºä¼šï¼Œå¯é€šè¿‡å®Œæˆä»»åŠ¡å¢åŠ æ¬¡æ•°ã€‚</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- é€»è¾‘éƒ¨åˆ† ---
        const strategyDatabase = {
            "Aggressive": [{ title: "æ¿€è¿›æˆé•¿å‹", desc: "æ‚¨é‡ä»“AIä¸ç§‘æŠ€è‚¡ï¼Œæ˜¾ç¤ºå‡ºå¯¹æŠ€æœ¯å˜é©çš„å¼ºçƒˆä¿¡å¿ƒ...", advice: "â€œåœ¨äº«å—æ³¡æ²«çš„åŒæ—¶ï¼Œè¯·æ—¶åˆ»å…³æ³¨ç¾è”å‚¨çš„æµåŠ¨æ€§æ‹ç‚¹ã€‚â€" }],
            "Conservative": [{ title: "ç°é‡‘æµæ”¶å‰²è€…", desc: "æ‚¨åçˆ±ç¾å€ºä¸çº¢åˆ©è‚¡ï¼Œè¯´æ˜æ‚¨æ·±è°™å¤åˆ©ä¹‹é“...", advice: "â€œç¡®å®šçš„ç¥¨æ¯æ˜¯ç©¿è¶Šå‘¨æœŸçš„æ°§æ°”ï¼Œè¯·ç»§ç»­ä¿æŒè€å¿ƒã€‚â€" }],
            "Hedge": [{ title: "å±æœºçŒæ‰‹å‹", desc: "æ‚¨å¤§å¹…è¶…é…é»„é‡‘ä¸å¤§å®—å•†å“ï¼Œè¡¨æ˜æ‚¨å¯¹åœ°ç¼˜æ”¿æ²»...", advice: "â€œé¿é™©æ˜¯æ‰‹æ®µè€Œéç›®çš„ï¼Œå½“å¸‚åœºææ…Œæƒ…ç»ªæ¶ˆé€€æ—¶ï¼Œéœ€è­¦æƒ•å›è°ƒã€‚â€" }],
            "Balanced": [{ title: "å¤šå…ƒå¹³è¡¡å‹", desc: "æ‚¨çš„é…ç½®å±•ç°å‡ºæä½³çš„å¹³è¡¡æ„Ÿã€‚åœ¨2026å¹´çš„éœ‡è¡å¸‚ä¸­...", advice: "â€œå‡è¡¡ä¸ä»£è¡¨å¹³åº¸ã€‚å»ºè®®å®šæœŸå†å¹³è¡¡æŠ•èµ„ç»„åˆã€‚â€" }]
        };
        function calculateProfile(g, b, h) {
            const total = g + b + h;
            if (total === 0) return "Balanced";
            const pG = (g / total) * 100; const pB = (b / total) * 100; const pH = (h / total) * 100;
            if (pH >= 35) return "Hedge"; if (pG >= 65) return "Aggressive"; if (pB >= 65) return "Conservative";
            const maxVal = Math.max(pG, pB, pH);
            if (maxVal === pG) return "Aggressive";
            if (maxVal === pB) return "Conservative";
            return "Balanced";
        }
        function getStrategyContent(p) { return strategyDatabase[p][0]; }

        const BASE_DAILY_LIMIT = 100; const ORIGINAL_PRICE = 1080;
        const couponConfig = [{ finalPrice: 518 }, { finalPrice: 618 }, { finalPrice: 688 }, { finalPrice: 888 }];
        let currentDrawResult = null;

        document.addEventListener('DOMContentLoaded', () => { 
            document.getElementById('range-growth').value=30; document.getElementById('range-balance').value=40; document.getElementById('range-hedge').value=30;
            updateDrawUI(); updateChart(); renderCouponList();
            if (!localStorage.getItem('barrons_welcome_boss_v17')) setTimeout(() => document.getElementById('welcomeModal').style.display='flex', 500); // flexç¡®ä¿å±…ä¸­
            initStickyObserver();
        });

        function initStickyObserver() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    const stickyBar = document.getElementById('stickyCouponBar');
                    if (!entry.isIntersecting && entry.boundingClientRect.top < 0) stickyBar.classList.add('visible');
                    else stickyBar.classList.remove('visible');
                });
            });
            const target = document.getElementById('static-coupon');
            if(target) observer.observe(target);
        }

        function closeWelcome() { document.getElementById('welcomeModal').style.display='none'; localStorage.setItem('barrons_welcome_boss_v17', 'true'); }
        function showLogin() { 
            const overlay = document.getElementById('loginOverlay');
            overlay.style.display = 'block'; 
        }
        function closeLogin() { document.getElementById('loginOverlay').style.display='none'; }
        function performLogin() { closeLogin(); alert('ç™»å½•æˆåŠŸ(æ¨¡æ‹Ÿ)'); }
        function showRules() { document.getElementById('rulesModal').style.display='flex'; }
        function closeRules() { document.getElementById('rulesModal').style.display='none'; }

        function handleSliderChange(id) {
            const el = document.getElementById(id); let val = parseInt(el.value);
            const g = parseInt(document.getElementById('range-growth').value); const b = parseInt(document.getElementById('range-balance').value); const h = parseInt(document.getElementById('range-hedge').value);
            let otherSum = (id==='range-growth'?b+h : (id==='range-balance'?g+h : g+b));
            if(val===100) { ['range-growth','range-balance','range-hedge'].forEach(k=>{ if(k!==id) document.getElementById(k).value=0; }); }
            if(val+otherSum>100) { el.value = 100-otherSum; showToast("æ€»ä»“ä½ä¸èƒ½è¶…è¿‡ 100%ï¼Œè¯·å…ˆå‡å°‘å…¶ä»–èµ„äº§"); }
            updateChart();
        }

        function updateChart() {
            const g = parseInt(document.getElementById('range-growth').value); const b = parseInt(document.getElementById('range-balance').value); const h = parseInt(document.getElementById('range-hedge').value);
            const total = g+b+h;
            document.getElementById('val-growth').innerText = g + "%";
            document.getElementById('val-balance').innerText = b + "%";
            document.getElementById('val-hedge').innerText = h + "%";
            
            document.getElementById('totalValue').innerText = total + "%";
            document.getElementById('totalValue').className = total===100 ? "total-value status-ok" : "total-value status-warn";
            const dispT = total===0?1:total; const p1=(g/dispT)*100; const p2=p1+(b/dispT)*100;
            document.getElementById('allocationChart').style.background = `conic-gradient(#d32f2f 0% ${p1}%, #FFD700 ${p1}% ${p2}%, #1565C0 ${p2}% 100%)`;
            const btn = document.getElementById('drawBtn');
            if(total>0) { btn.disabled=false; btn.innerText="ç”Ÿæˆé…ç½®è¯„æµ‹"; } else { btn.disabled=true; btn.innerText="è¯·é…ç½®èµ„äº§"; }
        }

        function analyzePortfolio() {
            if(getRemainingChances()<=0) { showToast("æ¬¡æ•°ä¸è¶³"); return; }
            const btn = document.getElementById('drawBtn'); btn.innerText="åˆ†æä¸­..."; btn.disabled=true;
            const data = getPlayData(); data.used_count++; savePlayData(data);
            
            setTimeout(() => {
                const g=parseInt(document.getElementById('range-growth').value); 
                const b=parseInt(document.getElementById('range-balance').value); 
                const h=parseInt(document.getElementById('range-hedge').value);
                const profile = calculateProfile(g,b,h); const content = getStrategyContent(profile); const cp = couponConfig[Math.floor(Math.random()*4)];
                currentDrawResult = { title: content.title, discount: ORIGINAL_PRICE-cp.finalPrice, finalPrice: cp.finalPrice, status: 'use' };
                
                document.getElementById('res-title').innerText = content.title;
                document.getElementById('res-desc').innerText = content.desc;
                document.getElementById('res-advice').innerText = content.advice;
                
                document.getElementById('ticketAmount').innerText = currentDrawResult.discount;
                document.getElementById('stickyAmount').innerText = currentDrawResult.discount;
                document.getElementById('offer-price-num').innerText = currentDrawResult.finalPrice;
                document.getElementById('offer-tag').innerText = `å·²ä¼˜æƒ ${currentDrawResult.discount}å…ƒ`;
                document.getElementById('offer-daily-price').innerText = `å·²æ¯”å®˜ç½‘æ¸ é“ä»·è¿˜ä¼˜æƒ ${currentDrawResult.discount}å…ƒ`;

                const tot = g+b+h||1; const p1=(g/tot)*100; const p2=(b/tot)*100; const p3=(h/tot)*100;
                document.getElementById('res-bar').innerHTML = `<div class="bar-seg" style="width:${p1}%; background:#d32f2f;"></div><div class="bar-seg" style="width:${p2}%; background:#FFD700;"></div><div class="bar-seg" style="width:${p3}%; background:#1565C0;"></div>`;

                saveCoupon(currentDrawResult);
                document.getElementById('page-landing').classList.add('hidden');
                document.getElementById('landingAction').classList.add('hidden');
                document.getElementById('page-result').classList.remove('hidden');
                document.getElementById('page-result').classList.add('fade-in');
                btn.innerText="ç”Ÿæˆé…ç½®è¯„æµ‹"; btn.disabled=false;
                startTimer('ticketTimer');
                initStickyObserver();
            }, 800);
        }

        function saveCoupon(c) { let l = JSON.parse(localStorage.getItem('barrons_cl_v11')||"[]"); l.unshift(c); localStorage.setItem('barrons_cl_v11',JSON.stringify(l)); renderCouponList(); }
        
        function renderCouponList() {
            const list = JSON.parse(localStorage.getItem('barrons_cl_v11') || "[]");
            const demoList = list.length > 0 ? list : [
                {discount: 618, title: 'ç¨³å¦‚è€é©¬', status: 'use'},
                {discount: 392, title: 'æ¿€è¿›æˆé•¿', status: 'used'},
                {discount: 100, title: 'æ–°æ‰‹ç¦åˆ©', status: 'expired'}
            ];
            
            const container = document.getElementById('coupon-list-dynamic');
            const fullContainer = document.getElementById('full-coupon-list');

            const generateHTML = (arr) => arr.map(c => {
                let btnHtml = '';
                if (c.status === 'used') btnHtml = '<button class="c-new-btn c-status-used">å·²ä½¿ç”¨</button>';
                else if (c.status === 'expired') btnHtml = '<button class="c-new-btn c-status-expired">å·²å¤±æ•ˆ</button>';
                else btnHtml = '<button class="c-new-btn c-status-use" onclick="goToOffer()">å»ä½¿ç”¨</button>';
                return `
                <div class="coupon-row-new">
                    <div class="c-new-left">
                        <div class="c-new-title">ä¼˜æƒ é‡‘é¢ Â¥${c.discount}</div>
                        <div class="c-new-desc">${c.title}ä¸“å±åˆ¸</div>
                        <div class="c-new-date">æœ‰æ•ˆæœŸè‡³: 2026/03/03</div>
                    </div>
                    ${btnHtml}
                </div>`;
            }).join('');

            container.innerHTML = demoList.length===0 ? '<div style="text-align:center; color:rgba(255,255,255,0.5); padding:10px;">æš‚æ— ä¼˜æƒ åˆ¸</div>' : generateHTML(demoList.slice(0, 5));
            if(demoList.length >= 5) document.getElementById('more-coupons-btn').classList.remove('hidden');

            fullContainer.innerHTML = demoList.length===0 ? '<div style="text-align:center; padding:20px;">æš‚æ— ä¼˜æƒ åˆ¸</div>' : generateHTML(demoList);
        }

        function goToCouponList() {
            document.getElementById('page-landing').classList.add('hidden');
            document.getElementById('landingAction').classList.add('hidden');
            document.getElementById('page-coupon-list').classList.remove('hidden');
        }

        function goToOffer() {
            document.getElementById('page-result').classList.add('hidden');
            document.getElementById('stickyCouponBar').classList.remove('visible');
            document.getElementById('page-landing').classList.add('hidden');
            document.getElementById('landingAction').classList.add('hidden'); 
            document.getElementById('page-coupon-list').classList.add('hidden');
            document.getElementById('page-offer').classList.remove('hidden');
            startTimer('offerTimer');
        }
        
        function backToHome() { 
            document.getElementById('page-coupon-list').classList.add('hidden');
            document.getElementById('page-landing').classList.remove('hidden'); 
            document.getElementById('landingAction').classList.remove('hidden');
        }
        
        function getPlayData() { 
            const t=new Date().toDateString(); let d=JSON.parse(localStorage.getItem('barrons_data_v3'));
            if(!d || d.date!==t) d={date:t, used_count:0, earned_count:0, tasks:{}};
            return d;
        }
        function savePlayData(d) { localStorage.setItem('barrons_data_v3',JSON.stringify(d)); updateDrawUI(); }
        function getRemainingChances() { const d=getPlayData(); return (BASE_DAILY_LIMIT+d.earned_count)-d.used_count; }
        function updateDrawUI() {
            const r=getRemainingChances(); document.getElementById('drawHint').innerHTML=`ä»Šæ—¥å‰©ä½™æœºä¼šï¼š<span style="color:#FFD700;font-weight:bold;">${r}</span>/100 æ¬¡`;
            const d=getPlayData();
            if(d.tasks.checkin) document.getElementById('btn-checkin').className="task-btn done";
            if(d.tasks.shareFriend) document.getElementById('btn-shareF').className="task-btn done";
            if(d.tasks.shareMoments) document.getElementById('btn-shareM').className="task-btn done";
            if(d.tasks.read) document.getElementById('btn-read').className="task-btn done";
        }
        function doTask(t) {
            const d=getPlayData(); let add=0;
            if(t==='checkin' && !d.tasks.checkin) { d.tasks.checkin=true; add=1; }
            else if(t==='shareFriend' && !d.tasks.shareFriend) { d.tasks.shareFriend=true; add=1; }
            else if(t==='shareMoments' && !d.tasks.shareMoments) { d.tasks.shareMoments=true; add=2; }
            else if(t==='read' && !d.tasks.read) { window.location.href='https://www.barrons.com.cn/original/article'; d.tasks.read=true; add=1; }
            else { if(t!=='read') showToast("ä»»åŠ¡å·²å®Œæˆ"); return; }
            if(add>0) { d.earned_count+=add; savePlayData(d); showToast(`ä»»åŠ¡å®Œæˆï¼è·å¾— +${add} æ¬¡è¯„æµ‹æœºä¼š`); }
        }
        
        function showToast(m) { const t=document.getElementById('toast'); t.innerText=m; t.classList.add('show'); setTimeout(()=>t.classList.remove('show'),2000); }
        let ti; function startTimer(id) { if(ti) clearInterval(ti); let s=17999; const el=document.getElementById(id); if(!el) return; ti=setInterval(()=>{ if(s<=0)return; s--; const h=Math.floor(s/3600),m=Math.floor((s%3600)/60),sec=s%60; el.innerText=`${h<10?'0'+h:h}:${m<10?'0'+m:m}:${sec<10?'0'+sec:sec}`; },1000); }
        function goToTasks() { document.querySelector('.section-container').scrollIntoView({behavior:'smooth'}); }
        function showCouponModal() { document.querySelectorAll('.section-container')[1].scrollIntoView({behavior:'smooth'}); }
    </script>
</body>
</html>
